
<!DOCTYPE html>
<html>
  <head>
    <title>Movie DNA</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.0/handlebars.js"></script>
    <script>
    /* From http://www.imdb.com/list/ls057556971/
       This represents the total list of "known movies"
    */
    var arrMovieDb =  {
      "movies": [
        {  "title":  "The Lord of the Rings: Return of the King" , "id": 1, 
        "img": "http://ia.media-imdb.com/images/M/MV5BMjE4MjA1NTAyMV5BMl5BanBnXkFtZTcwNzM1NDQyMQ@@._V1_SX640_SY720_.jpg" },
        {  "title":  "The Dark Night", "id": 2  },
        {  "title":  "Eternal Sunshine of the Spotless Mind", "id": 3  },
        {  "title":  "The Departed", "id": 4  },
        {  "title":  "Memento", "id": 5  },
        {  "title":  "Spirited Away", "id": 6  },
        {  "title":  "The Bourne Ultimatum", "id": 7  },
        {  "title":  "The Lord of the Rings: The Two Towers", "id": 8  },
        {  "title":  "Almost Famous", "id": 9  },
        {  "title":  "Finding Nemo",  "id": 10  },
        {  "title":  "Hot Fuzz", "id": 11  },
        {  "title":  "No Country for Old Men", "id": 12  },
        {  "title":  "Catch Me If You Can", "id": 13  },
        {  "title":  "Shaun of the Dead", "id": 14  },
        {  "title":  "The Hurt Locker", "id": 15  },
        {  "title":  "There Will Be Blood", "id": 16  },
        {  "title":  "Before Sunset", "id": 17  },
        {  "title":  "Slumdog Millionaire", "id": 18  },
        {  "title":  "Old Boy", "id": 19  },
        {  "title":  "City of God", "id": 20  }
      ]
    };
    </script>

    <script id="movies-selector" type="text/x-handlebars-template">
      <h1>First choose any movies in this list you've seen...</h1>
      <ul id="picksome">
       {{#each movies}}
          <li><input type="checkbox" id="{{id}}" name="movie-selection">
          <label for="{{id}}"><img src={{img}}>{{title}}</label></li>
        {{/each}}
      </ul>
    </script>
  </head>
  <body>

    <button id="doneWithMoviesSeen">Done.</button>
    <div id="which-movies-seen">
    </div>
    <div id="order-movies" class="secret">
      <h1>Viola!</h1>
    </div>

    <script>
      var source   = document.querySelector("#movies-selector").innerHTML;
      var template = Handlebars.compile(source);
      document.querySelector("#which-movies-seen").innerHTML = template(arrMovieDb);
      
      document.addEventListener(
  "DOMContentLoaded", 
   function () {
      var doneWithSeenButton =
          document.querySelector(
              "#doneWithMoviesSeen"
          );

			doneWithSeenButton
      	.addEventListener(
   				"click", 
        	function () {
     				console.log("which ones were checked? %o",  document.querySelectorAll("#picksome input:checked"));
            var next = document.querySelector("#order-movies");
            var current  = document.querySelector("#which-movies-seen");
            current.classList.add("secret");   
            next.classList.remove("secret");
  				}, 
        	false
      );
   }, 
   false
);
    </script>
    
    <style>
      .secret {
   display: none;
}

#picksome li input {
    display: none;
}


#picksome li {
   display: block;
   float: left;
   width: 15em;
   height: 5em;
   margin: 1em;
}

#picksome label {
     display: block;
     padding: 1em;
     border: 1px solid black;
}

#picksome input:checked+label {
  background-color: blue;
  color: white;
}
    </style>
    
  </body>
</html>
